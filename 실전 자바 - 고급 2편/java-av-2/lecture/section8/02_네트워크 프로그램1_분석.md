## 강의 정리

### 내용 요약

- InetAddress 가 호스트 이름으로 대상 IP를 찾는 과정
    - /etc/hosts (리눅스, mac)
    - C:\Windows\System32\drivers\etc\hosts (윈도우)
    - 이 파일에 정의 되어 있지 않은 호스트 이름은 DNS 서버에 요청해서 IP 주소를 얻는다.
    - 만약 호스트 파일에 localhost 가 없다면 127.0.0.1 localhost 를 추가해야 한다.
- new Socket("localhost", PORT) 를 사용하면 IP 주소가 아니기에 InetAddress 를 사용해서 IP를 먼저 찾는다.
- 사용한 자원을 정리하는 행위는 매우 중요하며 뒤에서 자세히 다룰예정
- 서버 코드 분석
    - 특정 포트를 하나 열어두어야 클라이언트가 해당 포트를 지정해서 접속 할 수 있다.
        - 해당 이유로 포트는 미리 지정해서 클라이언트가 알 수 있게 해야한다.
    - 클라이언트 서버 연결 과정
        1. 서버가 12345 서버 소켓을 열어두면 클라이언트가 12345 포트로 접속할 수 있다.
        2. 클라이언트가 12345 포트에 연결을 시도한다.
        3. 이때 OS 계층에서 TCP 3 way handshake 가 발생하고 TCP 연결이 완료된다.
        4. TCP 연결이 완료되면 서버는 OS backlog queue 라는 곳에 클라이언트와 서버의 TCP 연결 정보를 보관한다.
            - 이 연결 정보를 보면 클라이언트의 IP, PORT 서버의 IP, PORT 등의 정보가 모두 들어있다.
            - 자바에 있는게 아닌 OS 에 있는 정보이다.
    - accept()
        - 서버 소켓은 단지 클라이언트와 서버의 TCP 연결만 지원하는 특별한 소켓이다.
        - 실제 클라이언트와 서버 정보를 주고 받으려면 Socket 객체가 필요하다.
        - accept를 호출하면 OS backlog queue 에서 클라이언트와 서버의 TCP 연결 정보를 가져와서 실제 통신을 담당하는 Socket 객체를 생성한다.
    - 즉 실질적으로 연결하는것 까지는 OS 에서 해주는것이고 연결 후에 데이터를 주고 받는것은 자바에서 해주는 것이다.